{"version":3,"file":"js/485.56edb11f.js","mappings":"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","sources":["webpack://bmdstudio-ms-client/./src/views/cinema/ShowingonPlanList.vue","webpack://bmdstudio-ms-client/src/views/cinema/ShowingonPlanList.vue","webpack://bmdstudio-ms-client/./src/views/cinema/ShowingonPlanList.vue?9a02","webpack://bmdstudio-ms-client/./src/views/cinema/ShowingonPlanList.vue?d807"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b',{staticStyle:{\"color\":\"#409eff\"}},[_vm._v(_vm._s(_vm.roomInfo.cinema_name))]),_vm._v(\"的\"),_c('b',{staticStyle:{\"color\":\"#409eff\"}},[_vm._v(_vm._s(_vm.roomInfo.cinema_room_name)+\"（\"+_vm._s(_vm.roomInfo.cinema_room_type)+\"）\")]),_vm._v(\"的排片计划 \"),_c('el-divider'),_c('el-table',{attrs:{\"data\":_vm.planList}},[_c('el-table-column',{attrs:{\"label\":\"电影名称\",\"prop\":\"title\"}}),_c('el-table-column',{attrs:{\"label\":\"放映日期\",\"prop\":\"showingon_date\",\"width\":\"110px\"}}),_c('el-table-column',{attrs:{\"label\":\"放映场次\",\"prop\":\"showingon_time\",\"width\":\"100px\"}}),_c('el-table-column',{attrs:{\"label\":\"票价\",\"width\":\"110px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" ￥\"+_vm._s(scope.row.price)+\"元 \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"发布状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-text\":\"已发布\",\"inactive-text\":\"暂未发布\",\"active-value\":1,\"inactive-value\":0},on:{\"change\":function($event){return _vm.statusChange(scope.row.plan_id, $event)}},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deletePlan(scope.row.plan_id)}}})]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b style=\"color: #409eff\">{{ roomInfo.cinema_name }}</b>的<b\r\n      style=\"color: #409eff\"\r\n    >{{ roomInfo.cinema_room_name }}（{{ roomInfo.cinema_room_type }}）</b>的排片计划\r\n    <el-divider></el-divider>\r\n    <el-table :data=\"planList\">\r\n      <el-table-column\r\n        label=\"电影名称\"\r\n        prop=\"title\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        label=\"放映日期\"\r\n        prop=\"showingon_date\"\r\n        width=\"110px\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        label=\"放映场次\"\r\n        prop=\"showingon_time\"\r\n        width=\"100px\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        label=\"票价\"\r\n        width=\"110px\"\r\n      >\r\n        <template slot-scope=\"scope\"> ￥{{ scope.row.price }}元 </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"发布状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            @change=\"statusChange(scope.row.plan_id, $event)\"\r\n            active-text=\"已发布\"\r\n            inactive-text=\"暂未发布\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            v-model=\"scope.row.status\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            @click=\"deletePlan(scope.row.plan_id)\"\r\n            icon=\"el-icon-delete\"\r\n            circle\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport httpApi from '@/http';\r\nexport default {\r\n  data () {\r\n    return {\r\n      planList: [],\r\n      roomId: this.$route.params.roomId, //保存放映厅ID\r\n      roomInfo: {}, //保存放映厅基本信息\r\n    };\r\n  },\r\n  methods: {\r\n    getRoomPlanList () {\r\n      httpApi.showingonPlanApi.queryByRoomId({ room_id: this.roomId }).then((res) => {\r\n        console.log('放映厅排片计划表', res);\r\n        this.planList = res.data.data;\r\n      });\r\n    },\r\n    statusChange (pid, e) {\r\n      //e是更新后的参数\r\n      if (e) {\r\n        httpApi.showingonPlanApi.publish({ id: pid }).then((res) => {\r\n          console.log(res);\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              message: '发布成功',\r\n              type: 'success',\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        httpApi.showingonPlanApi.noPublish({ id: pid }).then((res) => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              message: '取消发布',\r\n              type: 'warning',\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    deletePlan (id) {\r\n      httpApi.showingonPlanApi.delete({ id }).then(res => {\r\n        console.log('删除成功：', res)\r\n        if (res.data.code == 200) {\r\n          this.$message({\r\n            message: '删除成功',\r\n            type: 'success'\r\n          })\r\n        }\r\n        this.getRoomPlanList()\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getRoomPlanList();\r\n    let params = { id: this.roomId };\r\n    httpApi.cinemaRoomApi.queryById(params).then((res) => {\r\n      console.log('放映厅信息', res);\r\n      this.roomInfo = res.data.data;\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShowingonPlanList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShowingonPlanList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowingonPlanList.vue?vue&type=template&id=5fc30dc0&scoped=true&\"\nimport script from \"./ShowingonPlanList.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowingonPlanList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fc30dc0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","_v","_s","roomInfo","cinema_name","cinema_room_name","cinema_room_type","attrs","planList","scopedSlots","_u","key","fn","scope","row","price","on","$event","statusChange","plan_id","model","value","status","callback","$$v","$set","expression","deletePlan","staticRenderFns","data","roomId","$route","params","methods","getRoomPlanList","httpApi","room_id","then","res","console","log","pid","e","id","code","$message","message","type","mounted","component"],"sourceRoot":""}