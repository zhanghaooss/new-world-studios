"use strict";(self["webpackChunkbmdstudio_ms_client"]=self["webpackChunkbmdstudio_ms_client"]||[]).push([[502],{2502:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});o(7658);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增放映厅")]),t("el-dialog",{attrs:{title:"新增放映厅",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"放映厅名称",prop:"room_name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.room_name,callback:function(t){e.$set(e.form,"room_name",t)},expression:"form.room_name"}})],1),t("el-form-item",{attrs:{label:"放映厅类型",prop:"room_type"}},[t("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择放映厅类型","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form.room_type,callback:function(t){e.$set(e.form,"room_type",t)},expression:"form.room_type"}},e._l(e.type_option,(function(e){return t("el-option",{key:e.type_id,attrs:{label:e.type_name,value:e.type_name}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("放映厅列表")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cinemaRoomData}},[t("el-table-column",{attrs:{label:"放映厅名称",prop:"room_name"}}),t("el-table-column",{attrs:{label:"放映厅类型",prop:"room_type"}}),t("el-table-column",{attrs:{sortable:"",label:"座位数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.room_size?t.row.room_size:"[暂未更新]")+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-view",circle:""},on:{click:function(t){return e.$router.push("/home/showingon-plan-list/"+o.row.id)}}}),t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.$router.push("/home/showingon-plan-add/"+o.row.id)}}}),t("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-s-grid",circle:""},on:{click:function(t){return e.$router.push("/home/seat-template/"+o.row.id)}}}),t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteRoom(o.row.id)}}})]}}])})],1)],1)},l=[],r=o(1294),a={data(){return{dialogFormVisible:!1,form:{room_name:"",room_type:[],movie_cinema_id:this.$route.params.cinemaId},rules:{room_name:[{required:!0,message:"必填",trigger:"blur"}],room_type:[{required:!0,message:"必填",trigger:"change"}]},type_option:[],loading:!1,cinemaRoomData:[]}},methods:{getTypesList(){r.Z.cinemaRoomApi.queryAllTypes().then((e=>{this.type_option=e.data.data}))},remoteMethod(){},submit(){this.$refs["form"].validate((e=>{e&&(this.form.room_type=String(this.form.room_type),r.Z.cinemaRoomApi.add(this.form).then((e=>{console.log(e),200==e.data.code&&this.$message({message:"添加成功成功",type:"success"}),this.getRoom()})),this.dialogFormVisible=!1)}))},getRoom(){r.Z.cinemaRoomApi.list({cinema_id:this.form.movie_cinema_id}).then((e=>{console.log(this.form.movie_cinema_id+"对应的所有影厅:",e),this.cinemaRoomData=e.data.data}))},deleteRoom(e){r.Z.cinemaRoomApi["delete"]({id:e}).then((e=>{console.log("删除放映厅：",e),200==e.code&&this.$message({message:"删除成功",type:"success"}),this.getRoom()}))}},mounted(){this.getTypesList(),this.getRoom()}},s=a,n=o(1001),m=(0,n.Z)(s,i,l,!1,null,"55bb9cdd",null),c=m.exports}}]);
//# sourceMappingURL=502.6c422eae.js.map