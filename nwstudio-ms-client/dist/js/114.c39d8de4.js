"use strict";(self["webpackChunkbmdstudio_ms_client"]=self["webpackChunkbmdstudio_ms_client"]||[]).push([[114],{7114:function(e,o,i){i.r(o),i.d(o,{default:function(){return u}});var a=function(){var e=this,o=e._self._c;return o("div",[o("el-form",{ref:"form",staticStyle:{width:"700px"},attrs:{"label-width":"100px",model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"电影院名称",prop:"cinema_name"}},[o("el-input",{model:{value:e.form.cinema_name,callback:function(o){e.$set(e.form,"cinema_name",o)},expression:"form.cinema_name"}})],1),o("el-form-item",{attrs:{label:"选择位置"}},[o("div",{staticStyle:{height:"200px",border:"1px solid #666"},attrs:{id:"mapContainer"}})]),o("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[o("el-input",{model:{value:e.form.address,callback:function(o){e.$set(e.form,"address",o)},expression:"form.address"}})],1),o("el-form-item",{attrs:{label:"省份",prop:"province"}},[o("el-input",{model:{value:e.form.province,callback:function(o){e.$set(e.form,"province",o)},expression:"form.province"}})],1),o("el-form-item",{attrs:{label:"城市",prop:"city"}},[o("el-input",{model:{value:e.form.city,callback:function(o){e.$set(e.form,"city",o)},expression:"form.city"}})],1),o("el-form-item",{attrs:{label:"地区",prop:"district"}},[o("el-input",{model:{value:e.form.district,callback:function(o){e.$set(e.form,"district",o)},expression:"form.district"}})],1),o("el-form-item",{attrs:{label:"经度",prop:"longitude"}},[o("el-input",{model:{value:e.form.longitude,callback:function(o){e.$set(e.form,"longitude",o)},expression:"form.longitude"}})],1),o("el-form-item",{attrs:{label:"纬度",prop:"latitude"}},[o("el-input",{model:{value:e.form.latitude,callback:function(o){e.$set(e.form,"latitude",o)},expression:"form.latitude"}})],1),o("el-form-item",{attrs:{label:"选择标签",prop:"tags"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:""},model:{value:e.form.tags,callback:function(o){e.$set(e.form,"tags",o)},expression:"form.tags"}},e._l(e.tags,(function(e){return o("el-option",{key:e.id,attrs:{label:e.tagname,value:e.tagname}})})),1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定新增电影院")])],1)],1)],1)},t=[],n=(i(7658),i(7634)),r=i.n(n),s=i(1294),l={data(){return{tags:[],form:{cinema_name:"",address:"",province:"",city:"",district:"",longitude:"",latitude:"",tags:[]},rules:{cinema_name:[{required:!0,message:"必填",trigger:"blur"}],address:[{required:!0,message:"必填",trigger:"blur"}],province:[{required:!0,message:"必填",trigger:"blur"}],city:[{required:!0,message:"必填",trigger:"blur"}],district:[{required:!0,message:"必填",trigger:"blur"}],longitude:[{required:!0,message:"必填",trigger:"blur"}],latitude:[{required:!0,message:"必填",trigger:"blur"}],tags:[{required:!0,message:"必填",trigger:"change"}]}}},methods:{submit(){this.$refs["form"].validate((e=>{e&&(this.form.tags=this.form.tags.join(","),this.$refs["form"].clearValidate(),console.log(this.form),s.Z.cinemaApi.addCinema(this.form).then((e=>{200==e.data.code&&(this.$message({message:"恭喜，影院新增成功",type:"success"}),this.$router.push("/home/cinema-list"))})))}))},initMap(){r().load({key:"cba88d9a52c127f2aac69158bb9c6e1b",version:"2.0",plugins:["AMap.Geocoder"]}).then((e=>{this.map=new e.Map("mapContainer",{viewMode:"3D",zoom:11,center:[116.397505,39.907648]}),this.map.on("click",(o=>{let i=o.lnglat.KL,a=o.lnglat.kT;console.log({lng:i,lat:a});let t=new e.Geocoder;t.getAddress([i,a],((e,o)=>{console.log(e,o),this.form.address=o.regeocode.formattedAddress;let t=o.regeocode.addressComponent;this.form.province=t.province,this.form.city=t.city?t.city:t.province,this.form.district=t.district,this.form.latitude=a,this.form.longitude=i}))}))})).catch((e=>{console.log(e)}))}},mounted(){this.initMap(),s.Z.cinemaApi.queryCinemaTags().then((e=>{console.log(e),this.tags=e.data.data}))}},p=l,c=i(1001),d=(0,c.Z)(p,a,t,!1,null,"599cfe44",null),u=d.exports},7634:function(e,o,i){i(7658),function(o,i){e.exports=i()}(0,(function(){function e(e){var a=[];return e.AMapUI&&a.push(o(e.AMapUI)),e.Loca&&a.push(i(e.Loca)),Promise.all(a)}function o(e){return new Promise((function(o,i){var s=[];if(e.plugins)for(var l=0;l<e.plugins.length;l+=1)-1==t.AMapUI.plugins.indexOf(e.plugins[l])&&s.push(e.plugins[l]);if(n.AMapUI===a.failed)i("前次请求 AMapUI 失败");else if(n.AMapUI===a.notload){n.AMapUI=a.loading,t.AMapUI.version=e.version||t.AMapUI.version,l=t.AMapUI.version;var p=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+l+"/main.js",c.onerror=function(e){n.AMapUI=a.failed,i("请求 AMapUI 失败")},c.onload=function(){if(n.AMapUI=a.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,i=s.length;e<i;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},p.appendChild(c)}else n.AMapUI===a.loaded?e.version&&e.version!==t.AMapUI.version?i("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,i=s.length;e<i;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o():e.version&&e.version!==t.AMapUI.version?i("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(e){e?i(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,i=s.length;e<i;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o()}))}))}function i(e){return new Promise((function(o,i){if(n.Loca===a.failed)i("前次请求 Loca 失败");else if(n.Loca===a.notload){n.Loca=a.loading,t.Loca.version=e.version||t.Loca.version;var s=t.Loca.version,l=t.AMap.version.startsWith("2"),p=s.startsWith("2");if(l&&!p||!l&&p)i("JSAPI 与 Loca 版本不对应！！");else{l=t.key,p=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+s+"&key="+l,c.onerror=function(e){n.Loca=a.failed,i("请求 AMapUI 失败")},c.onload=function(){for(n.Loca=a.loaded,o();r.Loca.length;)r.Loca.splice(0,1)[0]()},p.appendChild(c)}}else n.Loca===a.loaded?e.version&&e.version!==t.Loca.version?i("不允许多个版本 Loca 混用"):o():e.version&&e.version!==t.Loca.version?i("不允许多个版本 Loca 混用"):r.Loca.push((function(e){e?i(e):i()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(a||(a={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},n={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},r={AMap:[],AMapUI:[],Loca:[]},s=[],l=function(e){"function"==typeof e&&(n.AMap===a.loaded?e(window.AMap):s.push(e))};return{load:function(o){return new Promise((function(i,r){if(n.AMap==a.failed)r("");else if(n.AMap==a.notload){var p=o.key,c=o.version,d=o.plugins;p?(window.AMap&&"lbs.amap.com"!==location.host&&r("禁止多种API加载方式混用"),t.key=p,t.AMap.version=c||t.AMap.version,t.AMap.plugins=d||t.AMap.plugins,n.AMap=a.loading,c=document.body||document.head,window.___onAPILoaded=function(t){if(delete window.___onAPILoaded,t)n.AMap=a.failed,r(t);else for(n.AMap=a.loaded,e(o).then((function(){i(window.AMap)}))["catch"](r);s.length;)s.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+p+"&plugin="+t.AMap.plugins.join(","),d.onerror=function(e){n.AMap=a.failed,r(e)},c.appendChild(d)):r("请填写key")}else if(n.AMap==a.loaded)if(o.key&&o.key!==t.key)r("多个不一致的 key");else if(o.version&&o.version!==t.AMap.version)r("不允许多个版本 JSAPI 混用");else{if(p=[],o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==t.AMap.plugins.indexOf(o.plugins[c])&&p.push(o.plugins[c]);p.length?window.AMap.plugin(p,(function(){e(o).then((function(){i(window.AMap)}))["catch"](r)})):e(o).then((function(){i(window.AMap)}))["catch"](r)}else if(o.key&&o.key!==t.key)r("多个不一致的 key");else if(o.version&&o.version!==t.AMap.version)r("不允许多个版本 JSAPI 混用");else{var u=[];if(o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==t.AMap.plugins.indexOf(o.plugins[c])&&u.push(o.plugins[c]);l((function(){u.length?window.AMap.plugin(u,(function(){e(o).then((function(){i(window.AMap)}))["catch"](r)})):e(o).then((function(){i(window.AMap)}))["catch"](r)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},n={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}))}}]);
//# sourceMappingURL=114.c39d8de4.js.map