{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport httpApi from '../../http';\nexport default {\n  data() {\n    return {\n      name: '',\n      MoviesData: {\n        page: this.$route.params.page || 1,\n        pagesize: 10,\n        result: [],\n        total: 0\n      }\n    };\n  },\n  methods: {\n    //加载首页电影列表\n    getMovieList() {\n      let params = {\n        page: this.MoviesData.page,\n        pagesize: this.MoviesData.pagesize\n      };\n      httpApi.movieApi.queryAllMovie(params).then(res => {\n        this.MoviesData = res.data.data;\n      });\n    },\n    //查找电影\n    /**\r\n     * 业务：点击搜索携带输入框的关键字 返回模糊查询的结果列表\r\n     * 刷新停留 刷新之后输入框的内容还在，且结果列表依旧是模糊查询的结果列表\r\n     * 点击分页时候 切换的是模糊查询的结果列表\r\n     */\n    searchMovie() {\n      if (this.name && this.name.trim() != '') {\n        let params = {\n          name: this.name.trim(),\n          page: this.MoviesData.page,\n          pagesize: this.MoviesData.pagesize\n        };\n        httpApi.movieApi.queryMovieByName(params).then(res => {\n          this.MoviesData.result = res.data.data.result;\n        });\n      } else {\n        this.getMovieList();\n      }\n    },\n    //改变当前页\n    currentPageChange(page) {\n      this.MoviesData.page = page;\n      //刷新保留当前页，需要往地址中加当前页的参数\n      this.$router.push('/home/movie-list/' + page);\n      this.getMovieList();\n    }\n  },\n  mounted() {\n    this.getMovieList();\n  }\n};","map":{"version":3,"names":["httpApi","data","name","MoviesData","page","$route","params","pagesize","result","total","methods","getMovieList","movieApi","queryAllMovie","then","res","searchMovie","trim","queryMovieByName","currentPageChange","$router","push","mounted"],"sources":["src/views/movie/MovieList.vue"],"sourcesContent":["<template>\r\n\t<div class=\"actor-list\">\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home/index' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>电影管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>电影列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-divider></el-divider>\r\n\t\t<el-form :inline=\"true\" class=\"demo-form-inline\">\r\n\t\t\t<el-form-item label=\"名称\">\r\n\t\t\t\t<el-input v-model=\"name\" placeholder=\"请输入要查找的电影名称\"> </el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"searchMovie\">查询</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<el-divider content-position=\"left\">电影列表</el-divider>\r\n\t\t<el-table :data=\"this.MoviesData.result\" style=\"width: 100%\">\r\n\t\t\t<el-table-column label=\"封面\" align=\"center\" width=\"110px\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<img width=\"60px\" :src=\"scope.row.cover\" alt=\"\" />\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"标题\" prop=\"title\" align=\"center\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"主演\" prop=\"star_actor\" align=\"center\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"上映时间\" prop=\"showingon\" align=\"center\" width=\"120px\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"时长\" align=\"center\" width=\"120px\">\r\n\t\t\t\t<template slot-scope=\"scope\"> {{ scope.row.duration }}分钟 </template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"所属类别\" align=\"center\" prop=\"type\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" width=\"200\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" icon=\"el-icon-user-solid\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"success\" icon=\"el-icon-picture\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"warning\" icon=\"el-icon-edit\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<el-pagination\r\n\t\t\tbackground\r\n\t\t\t:current-page=\"MoviesData.page\"\r\n\t\t\tlayout=\"->,prev, pager, next , jumper ,  total\"\r\n\t\t\t:page-size=\"MoviesData.pagesize\"\r\n\t\t\t:total=\"MoviesData.total\"\r\n\t\t\t@current-change=\"currentPageChange\"\r\n\t\t>\r\n\t\t</el-pagination>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport httpApi from '../../http';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tname: '',\r\n\t\t\t\tMoviesData: {\r\n\t\t\t\t\tpage: this.$route.params.page || 1,\r\n\t\t\t\t\tpagesize: 10,\r\n\t\t\t\t\tresult: [],\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t//加载首页电影列表\r\n\t\t\tgetMovieList() {\r\n\t\t\t\tlet params = { page: this.MoviesData.page, pagesize: this.MoviesData.pagesize };\r\n\t\t\t\thttpApi.movieApi.queryAllMovie(params).then((res) => {\r\n\t\t\t\t\tthis.MoviesData = res.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//查找电影\r\n\t\t\t/**\r\n\t\t\t * 业务：点击搜索携带输入框的关键字 返回模糊查询的结果列表\r\n\t\t\t * 刷新停留 刷新之后输入框的内容还在，且结果列表依旧是模糊查询的结果列表\r\n\t\t\t * 点击分页时候 切换的是模糊查询的结果列表\r\n\t\t\t */\r\n\t\t\tsearchMovie() {\r\n\t\t\t\tif (this.name && this.name.trim() != '') {\r\n\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\tname: this.name.trim(),\r\n\t\t\t\t\t\tpage: this.MoviesData.page,\r\n\t\t\t\t\t\tpagesize: this.MoviesData.pagesize,\r\n\t\t\t\t\t};\r\n\t\t\t\t\thttpApi.movieApi.queryMovieByName(params).then((res) => {\r\n\t\t\t\t\t\tthis.MoviesData.result = res.data.data.result;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getMovieList();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//改变当前页\r\n\t\t\tcurrentPageChange(page) {\r\n\t\t\t\tthis.MoviesData.page = page;\r\n\t\t\t\t//刷新保留当前页，需要往地址中加当前页的参数\r\n\t\t\t\tthis.$router.push('/home/movie-list/' + page);\r\n\t\t\t\tthis.getMovieList();\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getMovieList();\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":";AAqDA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,UAAA;QACAC,IAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAF,IAAA;QACAG,QAAA;QACAC,MAAA;QACAC,KAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,aAAA;MACA,IAAAL,MAAA;QAAAF,IAAA,OAAAD,UAAA,CAAAC,IAAA;QAAAG,QAAA,OAAAJ,UAAA,CAAAI;MAAA;MACAP,OAAA,CAAAY,QAAA,CAAAC,aAAA,CAAAP,MAAA,EAAAQ,IAAA,CAAAC,GAAA;QACA,KAAAZ,UAAA,GAAAY,GAAA,CAAAd,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAe,YAAA;MACA,SAAAd,IAAA,SAAAA,IAAA,CAAAe,IAAA;QACA,IAAAX,MAAA;UACAJ,IAAA,OAAAA,IAAA,CAAAe,IAAA;UACAb,IAAA,OAAAD,UAAA,CAAAC,IAAA;UACAG,QAAA,OAAAJ,UAAA,CAAAI;QACA;QACAP,OAAA,CAAAY,QAAA,CAAAM,gBAAA,CAAAZ,MAAA,EAAAQ,IAAA,CAAAC,GAAA;UACA,KAAAZ,UAAA,CAAAK,MAAA,GAAAO,GAAA,CAAAd,IAAA,CAAAA,IAAA,CAAAO,MAAA;QACA;MACA;QACA,KAAAG,YAAA;MACA;IACA;IACA;IACAQ,kBAAAf,IAAA;MACA,KAAAD,UAAA,CAAAC,IAAA,GAAAA,IAAA;MACA;MACA,KAAAgB,OAAA,CAAAC,IAAA,uBAAAjB,IAAA;MACA,KAAAO,YAAA;IACA;EACA;EACAW,QAAA;IACA,KAAAX,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}