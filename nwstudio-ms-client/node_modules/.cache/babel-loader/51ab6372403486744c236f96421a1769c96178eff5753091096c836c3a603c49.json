{"ast":null,"code":"import httpApi from '@/http';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      form: {\n        room_name: '',\n        room_type: [],\n        movie_cinema_id: this.$route.params.cinemaId\n      },\n      rules: {\n        room_name: [{\n          required: true,\n          message: '必填',\n          trigger: 'blur'\n        }],\n        room_type: [{\n          required: true,\n          message: '必填',\n          trigger: 'change'\n        }]\n      },\n      type_option: [],\n      loading: false,\n      cinemaRoomData: []\n    };\n  },\n  methods: {\n    getTypesList() {\n      httpApi.cinemaRoomApi.queryAllTypes().then(res => {\n        this.type_option = res.data.data;\n      });\n    },\n    remoteMethod() {},\n    submit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.form.room_type = String(this.form.room_type);\n          httpApi.cinemaRoomApi.add(this.form).then(res => {\n            console.log(res);\n            if (res.data.code == 200) {\n              this.$message({\n                message: '添加成功成功',\n                type: 'success'\n              });\n            }\n          });\n          dialogFormVisible = false;\n        }\n      });\n    },\n    getRoom() {\n      httpApi.cinemaRoomApi.queryById({\n        id: this.form.movie_cinema_id\n      }).then(res => {\n        console.log(res);\n        this.cinemaRoomData = res.data.data;\n      });\n    },\n    deleteRoom() {}\n  },\n  mounted() {\n    this.getTypesList();\n    this.getRoom();\n  }\n};","map":{"version":3,"names":["httpApi","data","dialogFormVisible","form","room_name","room_type","movie_cinema_id","$route","params","cinemaId","rules","required","message","trigger","type_option","loading","cinemaRoomData","methods","getTypesList","cinemaRoomApi","queryAllTypes","then","res","remoteMethod","submit","$refs","validate","valid","String","add","console","log","code","$message","type","getRoom","queryById","id","deleteRoom","mounted"],"sources":["src/views/cinema/CinemaRoomList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 放映厅 -->\r\n    <el-button\r\n      type=\"primary\"\r\n      plain\r\n      @click=\"dialogFormVisible = true\"\r\n    >新增放映厅</el-button>\r\n\r\n    <el-dialog\r\n      title=\"新增放映厅\"\r\n      :visible.sync=\"dialogFormVisible\"\r\n    >\r\n      <el-form\r\n        :model=\"form\"\r\n        ref=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"110px\"\r\n      >\r\n        <el-form-item\r\n          label=\"放映厅名称\"\r\n          prop=\"room_name\"\r\n        >\r\n          <el-input\r\n            v-model=\"form.room_name\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"放映厅类型\"\r\n          prop=\"room_type\"\r\n        >\r\n          <el-select\r\n            v-model=\"form.room_type\"\r\n            multiple\r\n            filterable\r\n            remote\r\n            reserve-keyword\r\n            placeholder=\"请选择放映厅类型\"\r\n            :remote-method=\"remoteMethod\"\r\n            :loading=\"loading\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in type_option\"\r\n              :key=\"item.type_id\"\r\n              :label=\"item.type_name\"\r\n              :value=\"item.type_name\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div\r\n        slot=\"footer\"\r\n        class=\"dialog-footer\"\r\n      >\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"submit\"\r\n        >确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-divider content-position=\"left\">放映厅列表</el-divider>\r\n\r\n    <el-table\r\n      :data=\"cinemaRoomData\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column\r\n        label=\"放映厅名称\"\r\n        prop:\"room_name\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        label=\"放映厅类型\"\r\n        prop=\"room_type\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        sortable\r\n        label=\"座位数\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          [暂未更新]\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"success\"\r\n            icon=\"el-icon-view\"\r\n            circle\r\n            @click=\"\"\r\n          ></el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-plus\"\r\n            circle\r\n            @click=\"\"\r\n          ></el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-grid\"\r\n            circle\r\n            @click=\"\"\r\n          ></el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            circle\r\n            @click=\"deleteRoom(scope.row.cinema_id)\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport httpApi from '@/http';\r\nexport default {\r\n  data () {\r\n    return {\r\n      dialogFormVisible: false,\r\n      form: {\r\n        room_name: '',\r\n        room_type: [],\r\n        movie_cinema_id: this.$route.params.cinemaId,\r\n      },\r\n      rules: {\r\n        room_name: [{ required: true, message: '必填', trigger: 'blur' }],\r\n        room_type: [{ required: true, message: '必填', trigger: 'change' }],\r\n      },\r\n      type_option: [],\r\n      loading: false,\r\n      cinemaRoomData: []\r\n    };\r\n  },\r\n  methods: {\r\n    getTypesList () {\r\n      httpApi.cinemaRoomApi.queryAllTypes().then((res) => {\r\n        this.type_option = res.data.data;\r\n      });\r\n    },\r\n    remoteMethod () { },\r\n    submit () {\r\n      this.$refs['form'].validate((valid) => {\r\n        if (valid) {\r\n          this.form.room_type = String(this.form.room_type);\r\n          httpApi.cinemaRoomApi.add(this.form).then((res) => {\r\n            console.log(res);\r\n            if (res.data.code == 200) {\r\n              this.$message({\r\n                message: '添加成功成功',\r\n                type: 'success',\r\n              });\r\n            }\r\n          });\r\n          dialogFormVisible = false;\r\n        }\r\n      });\r\n    },\r\n    getRoom () {\r\n      httpApi.cinemaRoomApi.queryById({ id: this.form.movie_cinema_id }).then((res) => {\r\n        console.log(res)\r\n        this.cinemaRoomData = res.data.data;\r\n\r\n      })\r\n    }\r\n    , deleteRoom () {\r\n\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getTypesList();\r\n    this.getRoom()\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":"AA8HA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACAC,iBAAA;MACAC,IAAA;QACAC,SAAA;QACAC,SAAA;QACAC,eAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC;MACA;MACAC,KAAA;QACAN,SAAA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAR,SAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAC,WAAA;MACAC,OAAA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACAlB,OAAA,CAAAmB,aAAA,CAAAC,aAAA,GAAAC,IAAA,CAAAC,GAAA;QACA,KAAAR,WAAA,GAAAQ,GAAA,CAAArB,IAAA,CAAAA,IAAA;MACA;IACA;IACAsB,aAAA;IACAC,OAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAxB,IAAA,CAAAE,SAAA,GAAAuB,MAAA,MAAAzB,IAAA,CAAAE,SAAA;UACAL,OAAA,CAAAmB,aAAA,CAAAU,GAAA,MAAA1B,IAAA,EAAAkB,IAAA,CAAAC,GAAA;YACAQ,OAAA,CAAAC,GAAA,CAAAT,GAAA;YACA,IAAAA,GAAA,CAAArB,IAAA,CAAA+B,IAAA;cACA,KAAAC,QAAA;gBACArB,OAAA;gBACAsB,IAAA;cACA;YACA;UACA;UACAhC,iBAAA;QACA;MACA;IACA;IACAiC,QAAA;MACAnC,OAAA,CAAAmB,aAAA,CAAAiB,SAAA;QAAAC,EAAA,OAAAlC,IAAA,CAAAG;MAAA,GAAAe,IAAA,CAAAC,GAAA;QACAQ,OAAA,CAAAC,GAAA,CAAAT,GAAA;QACA,KAAAN,cAAA,GAAAM,GAAA,CAAArB,IAAA,CAAAA,IAAA;MAEA;IACA;IACAqC,WAAA,GAEA;EACA;EACAC,QAAA;IACA,KAAArB,YAAA;IACA,KAAAiB,OAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}