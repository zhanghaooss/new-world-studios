{"ast":null,"code":"import myaxios from '../../http/MyAxios';\nexport default {\n  data() {\n    return {\n      /**\r\n       * @param {Array} actorLists 初始演员列表\r\n       * @param {Array} inputTip 输入提示演员列表\r\n       * @param {Array} resList 查询结果列表\r\n       */\n      actorLists: [],\n      inputTip: [],\n      resList: [],\n      state2: ''\n    };\n  },\n  methods: {\n    //获取更新后的列表\n    getListByName(name) {\n      myaxios.post('http://localhost:3010/movie-actors/name', {\n        name: name\n      }).then(res => {\n        this.resList = res.data.data;\n      }).catch(err => console.log(err));\n    },\n    //点击按钮查询\n    searchAc() {\n      console.log(!this.state2);\n      if (this.state2) {\n        this.getListByName(this.state2.trim());\n      } else {\n        this.resList = this.actorLists;\n      }\n    },\n    // 显示搜索建议\n    querySearch(queryString, cb) {\n      var inputTip = this.inputTip;\n      var results = queryString ? inputTip.filter(this.createFilter(queryString)) : inputTip;\n      // 调用 callback 返回建议列表的数据\n      console.log(results);\n      cb(results);\n    },\n    createFilter(queryString) {\n      return inputTip => {\n        return inputTip.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    //点击搜索的建议\n    handleSelect(item) {\n      this.getListByName(item.actor_name);\n    }\n  },\n  mounted() {\n    //初始化列表\n    myaxios.get('http://localhost:3010/movie-actors', {\n      page: 1,\n      pagesize: 100\n    }).then(res => {\n      let result = res.data.data;\n      this.actorLists = result.map(actor => ({\n        ...actor,\n        value: actor.actor_name\n      }));\n      this.resList = this.actorLists;\n      this.inputTip = this.actorLists;\n    });\n  }\n};","map":{"version":3,"names":["myaxios","data","actorLists","inputTip","resList","state2","methods","getListByName","name","post","then","res","catch","err","console","log","searchAc","trim","querySearch","queryString","cb","results","filter","createFilter","value","toLowerCase","indexOf","handleSelect","item","actor_name","mounted","get","page","pagesize","result","map","actor"],"sources":["src/views/actor/ActorList.vue"],"sourcesContent":["<template>\r\n\t<div class=\"actor-list\">\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home/index' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>演员管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>演员列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-divider></el-divider>\r\n\t\t<template>\r\n\t\t\t姓名\r\n\t\t\t<el-autocomplete\r\n\t\t\t\tclass=\"inline-input\"\r\n\t\t\t\tv-model=\"state2\"\r\n\t\t\t\t:fetch-suggestions=\"querySearch\"\r\n\t\t\t\tplaceholder=\"请输入演员名字\"\r\n\t\t\t\t:trigger-on-focus=\"false\"\r\n\t\t\t\t@select=\"handleSelect\"\r\n\t\t\t></el-autocomplete>\r\n\t\t\t<el-button\r\n\t\t\t\tstyle=\"margin-left: 10px\"\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\tslot=\"append\"\r\n\t\t\t\ticon=\"el-icon-search\"\r\n\t\t\t\t@click=\"searchAc\"\r\n\t\t\t></el-button>\r\n\t\t</template>\r\n\t\t<el-divider content-position=\"left\">演员列表</el-divider>\r\n\t\t<ul class=\"acList\">\r\n\t\t\t<li class=\"actor\" v-for=\"actor in resList\" :key=\"actor.id\">\r\n\t\t\t\t<img :src=\"actor.actor_avatar\" alt=\"\" />\r\n\t\t\t\t<p>{{ actor.actor_name }}</p>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport myaxios from '../../http/MyAxios';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t/**\r\n\t\t\t\t * @param {Array} actorLists 初始演员列表\r\n\t\t\t\t * @param {Array} inputTip 输入提示演员列表\r\n\t\t\t\t * @param {Array} resList 查询结果列表\r\n\t\t\t\t */\r\n\t\t\t\tactorLists: [],\r\n\t\t\t\tinputTip: [],\r\n\t\t\t\tresList: [],\r\n\t\t\t\tstate2: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//获取更新后的列表\r\n\t\t\tgetListByName(name) {\r\n\t\t\t\tmyaxios\r\n\t\t\t\t\t.post('http://localhost:3010/movie-actors/name', { name: name })\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tthis.resList = res.data.data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => console.log(err));\r\n\t\t\t},\r\n\r\n\t\t\t//点击按钮查询\r\n\t\t\tsearchAc() {\r\n\t\t\t\tconsole.log(!this.state2);\r\n\t\t\t\tif (this.state2) {\r\n\t\t\t\t\tthis.getListByName(this.state2.trim());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.resList = this.actorLists;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 显示搜索建议\r\n\t\t\tquerySearch(queryString, cb) {\r\n\t\t\t\tvar inputTip = this.inputTip;\r\n\t\t\t\tvar results = queryString ? inputTip.filter(this.createFilter(queryString)) : inputTip;\r\n\t\t\t\t// 调用 callback 返回建议列表的数据\r\n\t\t\t\tconsole.log(results);\r\n\t\t\t\tcb(results);\r\n\t\t\t},\r\n\t\t\tcreateFilter(queryString) {\r\n\t\t\t\treturn (inputTip) => {\r\n\t\t\t\t\treturn inputTip.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t//点击搜索的建议\r\n\t\t\thandleSelect(item) {\r\n\t\t\t\tthis.getListByName(item.actor_name);\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t//初始化列表\r\n\t\t\tmyaxios.get('http://localhost:3010/movie-actors', { page: 1, pagesize: 100 }).then((res) => {\r\n\t\t\t\tlet result = res.data.data;\r\n\t\t\t\tthis.actorLists = result.map((actor) => ({\r\n\t\t\t\t\t...actor,\r\n\t\t\t\t\tvalue: actor.actor_name,\r\n\t\t\t\t}));\r\n\t\t\t\tthis.resList = this.actorLists;\r\n\t\t\t\tthis.inputTip = this.actorLists;\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.acList {\r\n\t\tpadding-top: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\t.actor {\r\n\t\t\tpadding: 5px;\r\n\t\t\twidth: 100px;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\timg {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"AAqCA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACA;AACA;AACA;AACA;AACA;MACAC,UAAA;MACAC,QAAA;MACAC,OAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,cAAAC,IAAA;MACAR,OAAA,CACAS,IAAA;QAAAD,IAAA,EAAAA;MAAA,GACAE,IAAA,CAAAC,GAAA;QACA,KAAAP,OAAA,GAAAO,GAAA,CAAAV,IAAA,CAAAA,IAAA;MACA,GACAW,KAAA,CAAAC,GAAA,IAAAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;IACA;IAEA;IACAG,SAAA;MACAF,OAAA,CAAAC,GAAA,OAAAV,MAAA;MACA,SAAAA,MAAA;QACA,KAAAE,aAAA,MAAAF,MAAA,CAAAY,IAAA;MACA;QACA,KAAAb,OAAA,QAAAF,UAAA;MACA;IACA;IACA;IACAgB,YAAAC,WAAA,EAAAC,EAAA;MACA,IAAAjB,QAAA,QAAAA,QAAA;MACA,IAAAkB,OAAA,GAAAF,WAAA,GAAAhB,QAAA,CAAAmB,MAAA,MAAAC,YAAA,CAAAJ,WAAA,KAAAhB,QAAA;MACA;MACAW,OAAA,CAAAC,GAAA,CAAAM,OAAA;MACAD,EAAA,CAAAC,OAAA;IACA;IACAE,aAAAJ,WAAA;MACA,OAAAhB,QAAA;QACA,OAAAA,QAAA,CAAAqB,KAAA,CAAAC,WAAA,GAAAC,OAAA,CAAAP,WAAA,CAAAM,WAAA;MACA;IACA;IACA;IACAE,aAAAC,IAAA;MACA,KAAArB,aAAA,CAAAqB,IAAA,CAAAC,UAAA;IACA;EACA;EACAC,QAAA;IACA;IACA9B,OAAA,CAAA+B,GAAA;MAAAC,IAAA;MAAAC,QAAA;IAAA,GAAAvB,IAAA,CAAAC,GAAA;MACA,IAAAuB,MAAA,GAAAvB,GAAA,CAAAV,IAAA,CAAAA,IAAA;MACA,KAAAC,UAAA,GAAAgC,MAAA,CAAAC,GAAA,CAAAC,KAAA;QACA,GAAAA,KAAA;QACAZ,KAAA,EAAAY,KAAA,CAAAP;MACA;MACA,KAAAzB,OAAA,QAAAF,UAAA;MACA,KAAAC,QAAA,QAAAD,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}