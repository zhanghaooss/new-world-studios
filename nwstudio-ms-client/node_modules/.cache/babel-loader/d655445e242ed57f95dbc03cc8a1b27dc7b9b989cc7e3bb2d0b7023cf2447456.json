{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport httpApi from '../../http';\nexport default {\n  data() {\n    return {\n      name: this.$route.params.name || '',\n      MoviesData: {\n        page: parseInt(this.$route.params.page) || 1,\n        pagesize: 10,\n        result: [],\n        total: 0\n      }\n    };\n  },\n  methods: {\n    //加载首页电影列表\n    getMovieList() {\n      console.log(arguments);\n      if (arguments.length == 0) {\n        let params = {\n          page: this.MoviesData.page,\n          pagesize: this.MoviesData.pagesize\n        };\n        httpApi.movieApi.queryAllMovie(params).then(res => {\n          this.MoviesData = res.data.data;\n        });\n      }\n      if (arguments[0] == 1) {\n        let params = {\n          name: this.name.trim(),\n          page: this.MoviesData.page,\n          pagesize: this.MoviesData.pagesize\n        };\n        httpApi.movieApi.queryMovieByName(params).then(res => {\n          this.MoviesData = res.data.data;\n          this.$router.push('/home/movie-list/' + this.name + '/' + this.MoviesData.page);\n        });\n      }\n    },\n    /**\r\n     * 查找电影\r\n     * 业务：点击搜索携带输入框的关键字 返回模糊查询的结果列表\r\n     * 刷新停留 刷新之后输入框的内容还在，且结果列表依旧是模糊查询的结果列表\r\n     * 点击分页时候 切换的是模糊查询的结果列表\r\n     */\n    searchMovie() {\n      if (this.name.trim()) {\n        this.MoviesData.page = 1;\n        this.getMovieList(1);\n      } else {\n        this.$router.push('/home/movie-list/1');\n        this.getMovieList();\n      }\n    },\n    /**\r\n     * 分页跳转\r\n     */\n    currentPageChange(page) {\n      this.MoviesData.page = page;\n      //刷新保留当前页，需要往地址中加当前页的参数\n      if (this.$route.params.name) {\n        this.$router.push('/home/movie-list/' + this.name + '/' + page);\n        this.getMovieList(1);\n      } else {\n        this.$router.push('/home/movie-list/' + page);\n        this.getMovieList();\n      }\n    }\n  },\n  mounted() {\n    this.$route.params.name ? this.getMovieList(1) : this.getMovieList();\n  }\n};","map":{"version":3,"names":["httpApi","data","name","$route","params","MoviesData","page","parseInt","pagesize","result","total","methods","getMovieList","console","log","arguments","length","movieApi","queryAllMovie","then","res","trim","queryMovieByName","$router","push","searchMovie","currentPageChange","mounted"],"sources":["src/views/movie/MovieList.vue"],"sourcesContent":["<template>\r\n\t<div class=\"actor-list\">\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home/index' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>电影管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>电影列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-divider></el-divider>\r\n\t\t<el-form :inline=\"true\" class=\"demo-form-inline\">\r\n\t\t\t<el-form-item label=\"名称\">\r\n\t\t\t\t<el-input\r\n\t\t\t\t\tv-model=\"name\"\r\n\t\t\t\t\tplaceholder=\"请输入要查找的电影名称\"\r\n\t\t\t\t\t@keydown.enter.native=\"searchMovie\"\r\n\t\t\t\t>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"searchMovie\">查询</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<el-divider content-position=\"left\">电影列表</el-divider>\r\n\t\t<el-table :data=\"this.MoviesData.result\" style=\"width: 100%\">\r\n\t\t\t<el-table-column label=\"封面\" align=\"center\" width=\"110px\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<img width=\"60px\" :src=\"scope.row.cover\" alt=\"\" />\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"标题\" prop=\"title\" align=\"center\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"主演\" prop=\"star_actor\" align=\"center\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"上映时间\" prop=\"showingon\" align=\"center\" width=\"120px\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"时长\" align=\"center\" width=\"120px\">\r\n\t\t\t\t<template slot-scope=\"scope\"> {{ scope.row.duration }}分钟 </template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"所属类别\" align=\"center\" prop=\"type\"> </el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\" width=\"200\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" icon=\"el-icon-user-solid\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"success\" icon=\"el-icon-picture\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"warning\" icon=\"el-icon-edit\" circle></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<el-pagination\r\n\t\t\tbackground\r\n\t\t\t:current-page=\"MoviesData.page\"\r\n\t\t\tlayout=\"->,prev, pager, next , jumper ,  total\"\r\n\t\t\t:page-size=\"MoviesData.pagesize\"\r\n\t\t\t:total=\"MoviesData.total\"\r\n\t\t\t@current-change=\"currentPageChange\"\r\n\t\t>\r\n\t\t</el-pagination>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport httpApi from '../../http';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tname: this.$route.params.name || '',\r\n\t\t\t\tMoviesData: {\r\n\t\t\t\t\tpage: parseInt(this.$route.params.page) || 1,\r\n\t\t\t\t\tpagesize: 10,\r\n\t\t\t\t\tresult: [],\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t//加载首页电影列表\r\n\t\t\tgetMovieList() {\r\n\t\t\t\tconsole.log(arguments);\r\n\t\t\t\tif (arguments.length == 0) {\r\n\t\t\t\t\tlet params = { page: this.MoviesData.page, pagesize: this.MoviesData.pagesize };\r\n\t\t\t\t\thttpApi.movieApi.queryAllMovie(params).then((res) => {\r\n\t\t\t\t\t\tthis.MoviesData = res.data.data;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (arguments[0] == 1) {\r\n\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\tname: this.name.trim(),\r\n\t\t\t\t\t\tpage: this.MoviesData.page,\r\n\t\t\t\t\t\tpagesize: this.MoviesData.pagesize,\r\n\t\t\t\t\t};\r\n\t\t\t\t\thttpApi.movieApi.queryMovieByName(params).then((res) => {\r\n\t\t\t\t\t\tthis.MoviesData = res.data.data;\r\n\t\t\t\t\t\tthis.$router.push('/home/movie-list/' + this.name + '/' + this.MoviesData.page);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 查找电影\r\n\t\t\t * 业务：点击搜索携带输入框的关键字 返回模糊查询的结果列表\r\n\t\t\t * 刷新停留 刷新之后输入框的内容还在，且结果列表依旧是模糊查询的结果列表\r\n\t\t\t * 点击分页时候 切换的是模糊查询的结果列表\r\n\t\t\t */\r\n\t\t\tsearchMovie() {\r\n\t\t\t\tif (this.name.trim()) {\r\n\t\t\t\t\tthis.MoviesData.page = 1;\r\n\t\t\t\t\tthis.getMovieList(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$router.push('/home/movie-list/1');\r\n\t\t\t\t\tthis.getMovieList();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 分页跳转\r\n\t\t\t */\r\n\t\t\tcurrentPageChange(page) {\r\n\t\t\t\tthis.MoviesData.page = page;\r\n\t\t\t\t//刷新保留当前页，需要往地址中加当前页的参数\r\n\t\t\t\tif (this.$route.params.name) {\r\n\t\t\t\t\tthis.$router.push('/home/movie-list/' + this.name + '/' + page);\r\n\t\t\t\t\tthis.getMovieList(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$router.push('/home/movie-list/' + page);\r\n\t\t\t\t\tthis.getMovieList();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$route.params.name ? this.getMovieList(1) : this.getMovieList();\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":";AA0DA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAF,IAAA;MACAG,UAAA;QACAC,IAAA,EAAAC,QAAA,MAAAJ,MAAA,CAAAC,MAAA,CAAAE,IAAA;QACAE,QAAA;QACAC,MAAA;QACAC,KAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,aAAA;MACAC,OAAA,CAAAC,GAAA,CAAAC,SAAA;MACA,IAAAA,SAAA,CAAAC,MAAA;QACA,IAAAZ,MAAA;UAAAE,IAAA,OAAAD,UAAA,CAAAC,IAAA;UAAAE,QAAA,OAAAH,UAAA,CAAAG;QAAA;QACAR,OAAA,CAAAiB,QAAA,CAAAC,aAAA,CAAAd,MAAA,EAAAe,IAAA,CAAAC,GAAA;UACA,KAAAf,UAAA,GAAAe,GAAA,CAAAnB,IAAA,CAAAA,IAAA;QACA;MACA;MACA,IAAAc,SAAA;QACA,IAAAX,MAAA;UACAF,IAAA,OAAAA,IAAA,CAAAmB,IAAA;UACAf,IAAA,OAAAD,UAAA,CAAAC,IAAA;UACAE,QAAA,OAAAH,UAAA,CAAAG;QACA;QACAR,OAAA,CAAAiB,QAAA,CAAAK,gBAAA,CAAAlB,MAAA,EAAAe,IAAA,CAAAC,GAAA;UACA,KAAAf,UAAA,GAAAe,GAAA,CAAAnB,IAAA,CAAAA,IAAA;UACA,KAAAsB,OAAA,CAAAC,IAAA,4BAAAtB,IAAA,cAAAG,UAAA,CAAAC,IAAA;QACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;IACAmB,YAAA;MACA,SAAAvB,IAAA,CAAAmB,IAAA;QACA,KAAAhB,UAAA,CAAAC,IAAA;QACA,KAAAM,YAAA;MACA;QACA,KAAAW,OAAA,CAAAC,IAAA;QACA,KAAAZ,YAAA;MACA;IACA;IACA;AACA;AACA;IACAc,kBAAApB,IAAA;MACA,KAAAD,UAAA,CAAAC,IAAA,GAAAA,IAAA;MACA;MACA,SAAAH,MAAA,CAAAC,MAAA,CAAAF,IAAA;QACA,KAAAqB,OAAA,CAAAC,IAAA,4BAAAtB,IAAA,SAAAI,IAAA;QACA,KAAAM,YAAA;MACA;QACA,KAAAW,OAAA,CAAAC,IAAA,uBAAAlB,IAAA;QACA,KAAAM,YAAA;MACA;IACA;EACA;EACAe,QAAA;IACA,KAAAxB,MAAA,CAAAC,MAAA,CAAAF,IAAA,QAAAU,YAAA,WAAAA,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}