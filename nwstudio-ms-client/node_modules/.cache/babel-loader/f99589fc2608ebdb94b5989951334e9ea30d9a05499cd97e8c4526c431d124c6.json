{"ast":null,"code":"import httpApi from '@/http';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      form: {\n        room_name: '',\n        room_type: [],\n        movie_cinema_id: this.$route.params.cinemaId\n      },\n      rules: {\n        room_name: [{\n          required: true,\n          message: '必填',\n          trigger: 'blur'\n        }],\n        room_type: [{\n          required: true,\n          message: '必填',\n          trigger: 'change'\n        }]\n      },\n      type_option: [],\n      loading: false,\n      cinemaRoomData: []\n    };\n  },\n  methods: {\n    getTypesList() {\n      httpApi.cinemaRoomApi.queryAllTypes().then(res => {\n        this.type_option = res.data.data;\n      });\n    },\n    remoteMethod() {},\n    submit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.form.room_type = String(this.form.room_type);\n          httpApi.cinemaRoomApi.add(this.form).then(res => {\n            console.log(res);\n            if (res.data.code == 200) {\n              this.$message({\n                message: '添加成功成功',\n                type: 'success'\n              });\n            }\n          });\n          this.dialogFormVisible = false;\n        }\n      });\n    },\n    getRoom() {\n      httpApi.cinemaRoomApi.queryById({\n        id: this.form.movie_cinema_id\n      }).then(res => {\n        console.log(res);\n        this.cinemaRoomData = [...res.data.data];\n      });\n    },\n    deleteRoom(id) {}\n  },\n  mounted() {\n    this.getTypesList();\n    this.getRoom();\n  }\n};","map":{"version":3,"names":["httpApi","data","dialogFormVisible","form","room_name","room_type","movie_cinema_id","$route","params","cinemaId","rules","required","message","trigger","type_option","loading","cinemaRoomData","methods","getTypesList","cinemaRoomApi","queryAllTypes","then","res","remoteMethod","submit","$refs","validate","valid","String","add","console","log","code","$message","type","getRoom","queryById","id","deleteRoom","mounted"],"sources":["src/views/cinema/CinemaRoomList.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 放映厅 -->\r\n\t\t<el-button type=\"primary\" plain @click=\"dialogFormVisible = true\">新增放映厅</el-button>\r\n\r\n\t\t<el-dialog title=\"新增放映厅\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t<el-form :model=\"form\" ref=\"form\" :rules=\"rules\" label-width=\"110px\">\r\n\t\t\t\t<el-form-item label=\"放映厅名称\" prop=\"room_name\">\r\n\t\t\t\t\t<el-input v-model=\"form.room_name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"放映厅类型\" prop=\"room_type\">\r\n\t\t\t\t\t<el-select\r\n\t\t\t\t\t\tv-model=\"form.room_type\"\r\n\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\tfilterable\r\n\t\t\t\t\t\tremote\r\n\t\t\t\t\t\treserve-keyword\r\n\t\t\t\t\t\tplaceholder=\"请选择放映厅类型\"\r\n\t\t\t\t\t\t:remote-method=\"remoteMethod\"\r\n\t\t\t\t\t\t:loading=\"loading\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<el-option\r\n\t\t\t\t\t\t\tv-for=\"item in type_option\"\r\n\t\t\t\t\t\t\t:key=\"item.type_id\"\r\n\t\t\t\t\t\t\t:label=\"item.type_name\"\r\n\t\t\t\t\t\t\t:value=\"item.type_name\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t<el-divider content-position=\"left\">放映厅列表</el-divider>\r\n\r\n\t\t<el-table :data=\"cinemaRoomData\" style=\"width: 100%\">\r\n\t\t\t<el-table-column label=\"放映厅名称\" prop=\"room_name\"></el-table-column>\r\n\t\t\t<el-table-column label=\"放映厅类型\" prop=\"room_type\"></el-table-column>\r\n\t\t\t<el-table-column sortable label=\"座位数\" align=\"center\">\r\n\t\t\t\t<template slot-scope=\"scope\"> [暂未更新] </template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"small\" type=\"success\" icon=\"el-icon-view\" circle @click=\"\"></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" circle @click=\"\"></el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"warning\" icon=\"el-icon-s-grid\" circle @click=\"\"></el-button>\r\n\t\t\t\t\t<el-button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\ttype=\"danger\"\r\n\t\t\t\t\t\ticon=\"el-icon-delete\"\r\n\t\t\t\t\t\tcircle\r\n\t\t\t\t\t\t@click=\"deleteRoom(scope.row.cinema_id)\"\r\n\t\t\t\t\t></el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport httpApi from '@/http';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tform: {\r\n\t\t\t\t\troom_name: '',\r\n\t\t\t\t\troom_type: [],\r\n\t\t\t\t\tmovie_cinema_id: this.$route.params.cinemaId,\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\troom_name: [{ required: true, message: '必填', trigger: 'blur' }],\r\n\t\t\t\t\troom_type: [{ required: true, message: '必填', trigger: 'change' }],\r\n\t\t\t\t},\r\n\t\t\t\ttype_option: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tcinemaRoomData: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetTypesList() {\r\n\t\t\t\thttpApi.cinemaRoomApi.queryAllTypes().then((res) => {\r\n\t\t\t\t\tthis.type_option = res.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremoteMethod() {},\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs['form'].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.form.room_type = String(this.form.room_type);\r\n\t\t\t\t\t\thttpApi.cinemaRoomApi.add(this.form).then((res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: '添加成功成功',\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.dialogFormVisible = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetRoom() {\r\n\t\t\t\thttpApi.cinemaRoomApi.queryById({ id: this.form.movie_cinema_id }).then((res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthis.cinemaRoomData = [...res.data.data];\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdeleteRoom(id) {},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getTypesList();\r\n\t\t\tthis.getRoom();\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":"AA+DA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACAC,iBAAA;MACAC,IAAA;QACAC,SAAA;QACAC,SAAA;QACAC,eAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC;MACA;MACAC,KAAA;QACAN,SAAA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAR,SAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAC,WAAA;MACAC,OAAA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACAlB,OAAA,CAAAmB,aAAA,CAAAC,aAAA,GAAAC,IAAA,CAAAC,GAAA;QACA,KAAAR,WAAA,GAAAQ,GAAA,CAAArB,IAAA,CAAAA,IAAA;MACA;IACA;IACAsB,aAAA;IACAC,OAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAxB,IAAA,CAAAE,SAAA,GAAAuB,MAAA,MAAAzB,IAAA,CAAAE,SAAA;UACAL,OAAA,CAAAmB,aAAA,CAAAU,GAAA,MAAA1B,IAAA,EAAAkB,IAAA,CAAAC,GAAA;YACAQ,OAAA,CAAAC,GAAA,CAAAT,GAAA;YACA,IAAAA,GAAA,CAAArB,IAAA,CAAA+B,IAAA;cACA,KAAAC,QAAA;gBACArB,OAAA;gBACAsB,IAAA;cACA;YACA;UACA;UACA,KAAAhC,iBAAA;QACA;MACA;IACA;IACAiC,QAAA;MACAnC,OAAA,CAAAmB,aAAA,CAAAiB,SAAA;QAAAC,EAAA,OAAAlC,IAAA,CAAAG;MAAA,GAAAe,IAAA,CAAAC,GAAA;QACAQ,OAAA,CAAAC,GAAA,CAAAT,GAAA;QACA,KAAAN,cAAA,OAAAM,GAAA,CAAArB,IAAA,CAAAA,IAAA;MACA;IACA;IACAqC,WAAAD,EAAA;EACA;EACAE,QAAA;IACA,KAAArB,YAAA;IACA,KAAAiB,OAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}