{"ast":null,"code":"import httpApi from '@/http';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      form: {\n        room_name: '',\n        room_type: [],\n        movie_cinema_id: this.$route.params.cinemaId\n      },\n      rules: {\n        room_name: [{\n          required: true,\n          message: '必填',\n          trigger: 'blur'\n        }],\n        room_type: [{\n          required: true,\n          message: '必填',\n          trigger: 'change'\n        }]\n      },\n      type_option: [],\n      loading: false\n    };\n  },\n  methods: {\n    getTypesList() {\n      httpApi.cinemaRoomApi.queryAllTypes().then(res => {\n        this.type_option = res.data.data;\n      });\n    },\n    remoteMethod() {},\n    submit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.form.room_type = String(this.form.room_type);\n          httpApi.cinemaRoomApi.add(this.form).then(res => {\n            console.log(res);\n            if (res.data.code == 200) {\n              this.$message({\n                message: '添加成功成功',\n                type: 'success'\n              });\n              dialogFormVisible = false;\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getTypesList();\n  }\n};","map":{"version":3,"names":["httpApi","data","dialogFormVisible","form","room_name","room_type","movie_cinema_id","$route","params","cinemaId","rules","required","message","trigger","type_option","loading","methods","getTypesList","cinemaRoomApi","queryAllTypes","then","res","remoteMethod","submit","$refs","validate","valid","String","add","console","log","code","$message","type","mounted"],"sources":["src/views/cinema/CinemaRoomList.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 放映厅 -->\r\n\t\t<el-button type=\"primary\" plain @click=\"dialogFormVisible = true\">新增放映厅</el-button>\r\n\r\n\t\t<el-dialog title=\"新增放映厅\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t<el-form :model=\"form\" ref=\"form\" :rules=\"rules\" label-width=\"110px\">\r\n\t\t\t\t<el-form-item label=\"放映厅名称\" prop=\"room_name\">\r\n\t\t\t\t\t<el-input v-model=\"form.room_name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"放映厅类型\" prop=\"room_type\">\r\n\t\t\t\t\t<el-select\r\n\t\t\t\t\t\tv-model=\"form.room_type\"\r\n\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\tfilterable\r\n\t\t\t\t\t\tremote\r\n\t\t\t\t\t\treserve-keyword\r\n\t\t\t\t\t\tplaceholder=\"请选择放映厅类型\"\r\n\t\t\t\t\t\t:remote-method=\"remoteMethod\"\r\n\t\t\t\t\t\t:loading=\"loading\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<el-option\r\n\t\t\t\t\t\t\tv-for=\"item in type_option\"\r\n\t\t\t\t\t\t\t:key=\"item.type_id\"\r\n\t\t\t\t\t\t\t:label=\"item.type_name\"\r\n\t\t\t\t\t\t\t:value=\"item.type_name\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t<el-divider content-position=\"left\">放映厅列表</el-divider>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport httpApi from '@/http';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tform: {\r\n\t\t\t\t\troom_name: '',\r\n\t\t\t\t\troom_type: [],\r\n\t\t\t\t\tmovie_cinema_id: this.$route.params.cinemaId,\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\troom_name: [{ required: true, message: '必填', trigger: 'blur' }],\r\n\t\t\t\t\troom_type: [{ required: true, message: '必填', trigger: 'change' }],\r\n\t\t\t\t},\r\n\t\t\t\ttype_option: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetTypesList() {\r\n\t\t\t\thttpApi.cinemaRoomApi.queryAllTypes().then((res) => {\r\n\t\t\t\t\tthis.type_option = res.data.data;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremoteMethod() {},\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs['form'].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.form.room_type = String(this.form.room_type);\r\n\t\t\t\t\t\thttpApi.cinemaRoomApi.add(this.form).then((res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: '添加成功成功',\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tdialogFormVisible = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getTypesList();\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":"AAyCA,OAAAA,OAAA;AACA;EACAC,KAAA;IACA;MACAC,iBAAA;MACAC,IAAA;QACAC,SAAA;QACAC,SAAA;QACAC,eAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC;MACA;MACAC,KAAA;QACAN,SAAA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAR,SAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACAjB,OAAA,CAAAkB,aAAA,CAAAC,aAAA,GAAAC,IAAA,CAAAC,GAAA;QACA,KAAAP,WAAA,GAAAO,GAAA,CAAApB,IAAA,CAAAA,IAAA;MACA;IACA;IACAqB,aAAA;IACAC,OAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAvB,IAAA,CAAAE,SAAA,GAAAsB,MAAA,MAAAxB,IAAA,CAAAE,SAAA;UACAL,OAAA,CAAAkB,aAAA,CAAAU,GAAA,MAAAzB,IAAA,EAAAiB,IAAA,CAAAC,GAAA;YACAQ,OAAA,CAAAC,GAAA,CAAAT,GAAA;YACA,IAAAA,GAAA,CAAApB,IAAA,CAAA8B,IAAA;cACA,KAAAC,QAAA;gBACApB,OAAA;gBACAqB,IAAA;cACA;cACA/B,iBAAA;YACA;UACA;QACA;MACA;IACA;EACA;EACAgC,QAAA;IACA,KAAAjB,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}