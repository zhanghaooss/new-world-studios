{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nimport httpApi from '@/http';\nimport { Notification } from 'element-ui';\nimport router from '@/router';\nimport { KEYS, setSession, getSession } from '@/utils/storage';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  //还可以分模块写\n  state: {\n    user: getSession(KEYS.USER_INFO),\n    token: getSession(KEYS.TOKEN)\n  },\n  getters: {},\n  mutations: {\n    updateUser(state, payload) {\n      state.user = payload;\n    },\n    saveToken(state, payload) {\n      state.token = payload;\n    }\n  },\n  actions: {\n    login(store, params) {\n      httpApi.adminApi.login(params).then(res => {\n        console.log('登陆结果,', res);\n        if (res.data.code == 200) {\n          store.commit('updateUser', res.data.data.user);\n          store.commit('saveToken', res.data.data.token);\n          //向Storage中存储user对象\n          setSession(KEYS.USER_INFO, JSON.stringify(res.data.data.user));\n          setSession(KEYS.TOKEN, JSON.stringify(res.data.data.token));\n          router.replace('/home/index');\n          Notification.success({\n            message: '登录成功'\n          });\n        } else {\n          Notification.error({\n            message: res.data.msg\n          });\n        }\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","httpApi","Notification","router","KEYS","setSession","getSession","use","Store","state","user","USER_INFO","token","TOKEN","getters","mutations","updateUser","payload","saveToken","actions","login","store","params","adminApi","then","res","console","log","data","code","commit","JSON","stringify","replace","success","message","error","msg","modules"],"sources":["C:/Users/29439/Desktop/百慕大影城/bmdstudio-ms-client/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport httpApi from '@/http';\nimport { Notification } from 'element-ui';\nimport router from '@/router';\nimport { KEYS, setSession, getSession } from '@/utils/storage';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n\t//还可以分模块写\n\tstate: {\n\t\tuser: getSession(KEYS.USER_INFO),\n\t\ttoken: getSession(KEYS.TOKEN),\n\t},\n\tgetters: {},\n\tmutations: {\n\t\tupdateUser(state, payload) {\n\t\t\tstate.user = payload;\n\t\t},\n\t\tsaveToken(state, payload) {\n\t\t\tstate.token = payload;\n\t\t},\n\t},\n\tactions: {\n\t\tlogin(store, params) {\n\t\t\thttpApi.adminApi.login(params).then((res) => {\n\t\t\t\tconsole.log('登陆结果,', res);\n\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\tstore.commit('updateUser', res.data.data.user);\n\t\t\t\t\tstore.commit('saveToken', res.data.data.token);\n\t\t\t\t\t//向Storage中存储user对象\n\t\t\t\t\tsetSession(KEYS.USER_INFO, JSON.stringify(res.data.data.user));\n\t\t\t\t\tsetSession(KEYS.TOKEN, JSON.stringify(res.data.data.token));\n\t\t\t\t\trouter.replace('/home/index');\n\t\t\t\t\tNotification.success({\n\t\t\t\t\t\tmessage: '登录成功',\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tNotification.error({ message: res.data.msg });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n\n\tmodules: {},\n});\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,QAAQ;AAC5B,SAASC,YAAY,QAAQ,YAAY;AACzC,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,IAAI,EAAEC,UAAU,EAAEC,UAAU,QAAQ,iBAAiB;AAE9DP,GAAG,CAACQ,GAAG,CAACP,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACQ,KAAK,CAAC;EAC7B;EACAC,KAAK,EAAE;IACNC,IAAI,EAAEJ,UAAU,CAACF,IAAI,CAACO,SAAS,CAAC;IAChCC,KAAK,EAAEN,UAAU,CAACF,IAAI,CAACS,KAAK;EAC7B,CAAC;EACDC,OAAO,EAAE,CAAC,CAAC;EACXC,SAAS,EAAE;IACVC,UAAUA,CAACP,KAAK,EAAEQ,OAAO,EAAE;MAC1BR,KAAK,CAACC,IAAI,GAAGO,OAAO;IACrB,CAAC;IACDC,SAASA,CAACT,KAAK,EAAEQ,OAAO,EAAE;MACzBR,KAAK,CAACG,KAAK,GAAGK,OAAO;IACtB;EACD,CAAC;EACDE,OAAO,EAAE;IACRC,KAAKA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACpBrB,OAAO,CAACsB,QAAQ,CAACH,KAAK,CAACE,MAAM,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAK;QAC5CC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,GAAG,CAAC;QACzB,IAAIA,GAAG,CAACG,IAAI,CAACC,IAAI,IAAI,GAAG,EAAE;UACzBR,KAAK,CAACS,MAAM,CAAC,YAAY,EAAEL,GAAG,CAACG,IAAI,CAACA,IAAI,CAAClB,IAAI,CAAC;UAC9CW,KAAK,CAACS,MAAM,CAAC,WAAW,EAAEL,GAAG,CAACG,IAAI,CAACA,IAAI,CAAChB,KAAK,CAAC;UAC9C;UACAP,UAAU,CAACD,IAAI,CAACO,SAAS,EAAEoB,IAAI,CAACC,SAAS,CAACP,GAAG,CAACG,IAAI,CAACA,IAAI,CAAClB,IAAI,CAAC,CAAC;UAC9DL,UAAU,CAACD,IAAI,CAACS,KAAK,EAAEkB,IAAI,CAACC,SAAS,CAACP,GAAG,CAACG,IAAI,CAACA,IAAI,CAAChB,KAAK,CAAC,CAAC;UAC3DT,MAAM,CAAC8B,OAAO,CAAC,aAAa,CAAC;UAC7B/B,YAAY,CAACgC,OAAO,CAAC;YACpBC,OAAO,EAAE;UACV,CAAC,CAAC;QACH,CAAC,MAAM;UACNjC,YAAY,CAACkC,KAAK,CAAC;YAAED,OAAO,EAAEV,GAAG,CAACG,IAAI,CAACS;UAAI,CAAC,CAAC;QAC9C;MACD,CAAC,CAAC;IACH;EACD,CAAC;EAEDC,OAAO,EAAE,CAAC;AACX,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}